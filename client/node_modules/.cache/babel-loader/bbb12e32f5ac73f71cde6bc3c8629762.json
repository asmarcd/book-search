{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/asmar/Code/2021/book-search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import API from'../utils/API';import{BookContext}from'./BookContext';import{PageContext}from'./PageContext';import{makeStyles}from'@material-ui/core/styles';import Card from'@material-ui/core/Card';import CardActions from'@material-ui/core/CardActions';import CardContent from'@material-ui/core/CardContent';import Button from'@material-ui/core/Button';import Typography from'@material-ui/core/Typography';import CardMedia from'@material-ui/core/CardMedia';import SaveIcon from'@material-ui/icons/Save';import IconButton from'@material-ui/core/IconButton';import Grid from'@material-ui/core/Grid';import DeleteIcon from'@material-ui/icons/Delete';import Snackbar from'@material-ui/core/Snackbar';import Alert from'@material-ui/lab/Alert';var useStyles=makeStyles({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},media:{width:\"20vw\",margin:\"20px\"},body:{width:\"60vw\"},buttons:{alignItems:\"center\"}});var Book=function Book(_ref){var title=_ref.title,author=_ref.author,description=_ref.description,image=_ref.image,link=_ref.link,id=_ref.id,deleteItem=_ref.deleteItem;var classes=useStyles();var _useContext=useContext(BookContext),_useContext2=_slicedToArray(_useContext,2),books=_useContext2[0],setBooks=_useContext2[1];var _useContext3=useContext(PageContext),_useContext4=_slicedToArray(_useContext3,2),page=_useContext4[0],setPage=_useContext4[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var addBook=function addBook(e){books.forEach(function(book){if(book.id===e.target.value){API.saveBook({id:book.id,title:book.volumeInfo.title,author:book.volumeInfo.authors[0],description:book.volumeInfo.description,image:book.volumeInfo.imageLinks.thumbnail,link:book.infoLink});}});setOpen(true);};var removeBook=function removeBook(e){API.getAllBooks().then(function(result){var library=result.data.data;library.forEach(function(book){if(book._id===e.target.value){API.deleteBook(book._id);}});deleteItem();});};var handleClose=function handleClose(e,r){if(r===\"clickaway\"){return;}setOpen(false);};if(page===\"search\"){return/*#__PURE__*/_jsxs(Card,{className:classes.root,variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",children:title}),/*#__PURE__*/_jsx(Typography,{className:classes.pos,color:\"textSecondary\",children:author}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",className:classes.body,children:description})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(CardMedia,{className:classes.media,component:\"img\",alt:\"Book Cover\",image:image})})]})]}),/*#__PURE__*/_jsxs(CardActions,{className:classes.buttons,children:[/*#__PURE__*/_jsx(Button,{size:\"small\",href:link,children:\"Learn More on Google Books\"}),/*#__PURE__*/_jsx(IconButton,{onClick:addBook,value:id,children:/*#__PURE__*/_jsx(SaveIcon,{})}),/*#__PURE__*/_jsx(Snackbar,{open:open,autoHideDuration:6000,onClose:handleClose,children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:\"success\",children:\"Book Saved!\"})})]})]});};if(page===\"saved\"){return/*#__PURE__*/_jsxs(Card,{className:classes.root,variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",children:title}),/*#__PURE__*/_jsx(Typography,{className:classes.pos,color:\"textSecondary\",children:author}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"p\",className:classes.body,children:description})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(CardMedia,{className:classes.media,component:\"img\",alt:\"Book Cover\",image:image})})]})]}),/*#__PURE__*/_jsxs(CardActions,{className:classes.buttons,children:[/*#__PURE__*/_jsx(Button,{size:\"small\",href:link,children:\"Learn More on Google Books\"}),/*#__PURE__*/_jsx(IconButton,{onClick:removeBook,value:id,children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})]});}};export default Book;","map":{"version":3,"sources":["C:/Users/asmar/code/2021/book-search/client/src/components/Book.js"],"names":["React","useContext","useState","API","BookContext","PageContext","makeStyles","Card","CardActions","CardContent","Button","Typography","CardMedia","SaveIcon","IconButton","Grid","DeleteIcon","Snackbar","Alert","useStyles","root","minWidth","title","fontSize","pos","marginBottom","media","width","margin","body","buttons","alignItems","Book","author","description","image","link","id","deleteItem","classes","books","setBooks","page","setPage","open","setOpen","addBook","e","forEach","book","target","value","saveBook","volumeInfo","authors","imageLinks","thumbnail","infoLink","removeBook","getAllBooks","then","result","library","data","_id","deleteBook","handleClose","r"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport API from '../utils/API';\r\nimport { BookContext } from './BookContext';\r\nimport { PageContext } from './PageContext';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport Alert from '@material-ui/lab/Alert'\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minWidth: 275,\r\n    },\r\n    title: {\r\n        fontSize: 14,\r\n    },\r\n    pos: {\r\n        marginBottom: 12,\r\n    },\r\n    media: {\r\n        width: \"20vw\",\r\n        margin: \"20px\"\r\n    },\r\n    body: {\r\n        width: \"60vw\"\r\n    },\r\n    buttons: {\r\n        alignItems: \"center\"\r\n    }\r\n});\r\n\r\nconst Book = ({ title, author, description, image, link, id, deleteItem }) => {\r\n    const classes = useStyles();\r\n\r\n    const [books, setBooks] = useContext(BookContext);\r\n    const [page, setPage] = useContext(PageContext)\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const addBook = e => {\r\n        books.forEach(book => {\r\n            if (book.id === e.target.value) {\r\n                API.saveBook({\r\n                    id: book.id,\r\n                    title: book.volumeInfo.title,\r\n                    author: book.volumeInfo.authors[0],\r\n                    description: book.volumeInfo.description,\r\n                    image: book.volumeInfo.imageLinks.thumbnail,\r\n                    link: book.infoLink\r\n                })\r\n            }\r\n        })\r\n        setOpen(true);\r\n    };\r\n\r\n    const removeBook = e => {\r\n        API.getAllBooks().then(result => {\r\n            let library = result.data.data;\r\n            library.forEach(book => {\r\n                if (book._id === e.target.value) {\r\n                    API.deleteBook(book._id)\r\n                }\r\n            })\r\n            deleteItem();\r\n        })\r\n    };\r\n\r\n    const handleClose = (e, r) => {\r\n        if (r===\"clickaway\") {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n    };\r\n\r\n    if (page === \"search\") {\r\n        return (\r\n            <Card className={classes.root} variant=\"outlined\">\r\n                <CardContent>\r\n                    <Typography variant=\"h5\" component=\"h2\">\r\n                        {title}\r\n                    </Typography>\r\n                    <Typography className={classes.pos} color=\"textSecondary\">\r\n                        {author}\r\n                    </Typography>\r\n                    <Grid container>\r\n                        <Grid item>\r\n                            <Typography variant=\"body2\" component=\"p\" className={classes.body}>\r\n                                {description}\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <CardMedia className={classes.media}\r\n                                component=\"img\"\r\n                                alt=\"Book Cover\"\r\n                                image={image}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                </CardContent>\r\n                <CardActions className={classes.buttons}>\r\n                    <Button size=\"small\" href={link}>Learn More on Google Books</Button>\r\n                    <IconButton onClick={addBook} value={id}>\r\n                        <SaveIcon />\r\n                    </IconButton>\r\n                    <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\r\n                        <Alert onClose={handleClose} severity=\"success\">\r\n                            Book Saved!\r\n                        </Alert>\r\n                    </Snackbar>\r\n\r\n                </CardActions>\r\n            </Card >\r\n        );\r\n    };\r\n\r\n    if (page === \"saved\") {\r\n        return (\r\n            <Card className={classes.root} variant=\"outlined\">\r\n                <CardContent>\r\n                    <Typography variant=\"h5\" component=\"h2\">\r\n                        {title}\r\n                    </Typography>\r\n                    <Typography className={classes.pos} color=\"textSecondary\">\r\n                        {author}\r\n                    </Typography>\r\n                    <Grid container>\r\n                        <Grid item>\r\n                            <Typography variant=\"body2\" component=\"p\" className={classes.body}>\r\n                                {description}\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <CardMedia className={classes.media}\r\n                                component=\"img\"\r\n                                alt=\"Book Cover\"\r\n                                image={image}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                </CardContent>\r\n                <CardActions className={classes.buttons}>\r\n                    <Button size=\"small\" href={link}>Learn More on Google Books</Button>\r\n                    <IconButton onClick={removeBook} value={id}>\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n                </CardActions>\r\n            </Card >\r\n        )\r\n    }\r\n};\r\n\r\nexport default Book;"]},"metadata":{},"sourceType":"module"}